(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8,6],{Sl5v:function(e,n,t){"use strict";t.r(n);t("+L6B");var r=t("2/Rp"),a=(t("miYZ"),t("tsqr")),u=t("ODXe"),c=t("q1tI"),o=t.n(c),l=t("qPJ8");function i(){var e=Object(c["useState"])(0),n=Object(u["a"])(e,2),t=n[0],i=n[1];return Object(l["a"])((()=>(a["b"].success("running effect once on mount"),()=>{a["b"].warn("running clean-up of effect on unmount")}))),o.a.createElement(o.a.Fragment,null,o.a.createElement("h1",null,"hello world"),o.a.createElement("p",null,"\u8ba1\u6570\uff1a",t),o.a.createElement(r["a"],{onClick:()=>i(t+1)},"\u9012\u589e"))}n["default"]=()=>{var e=Object(c["useState"])(!0),n=Object(u["a"])(e,2),t=n[0],a=n[1];return o.a.createElement("div",null,o.a.createElement(r["a"],{type:"primary",onClick:()=>a(!t)},t?"\u9690\u85cf\u5b50\u7ec4\u4ef6":"\u663e\u793a\u5b50\u7ec4\u4ef6"),t?o.a.createElement(i,null):null)}},qPJ8:function(e,n,t){"use strict";t.d(n,"a",(function(){return u})),t.d(n,"b",(function(){return o})),t.d(n,"c",(function(){return b})),t.d(n,"d",(function(){return g})),t.d(n,"e",(function(){return k}));var r=t("q1tI");function a(e){Object(r["useEffect"])(e,[])}var u=a;function c(e){u((()=>{e()}))}var o=c,l=t("o0o1"),i=t.n(l),s=t("HaE+"),d=(e,n)=>e.every(((t,r)=>Object.is(e[r],n[r])));function f(e,n){var t=Object(r["useRef"])(void 0),a=Object(r["useRef"])(void 0);return a.current&&n&&d(n,a.current)||(t.current=e(),a.current=n),t.current}var m=f;function v(e,n){return m((()=>e),n)}var p=v,E=t("LvDl");function h(e,n){var t,a=Object(r["useRef"])(e),u=Object(r["useRef"])(!1);a.current=e;var c,o,l,d,f=null!==(t=null===n||void 0===n?void 0:n.wait)&&void 0!==t?t:1e3;return console.log(null===n||void 0===n?void 0:n.action),"lock"===(null===n||void 0===n?void 0:n.action)?p((function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];Object(s["a"])(i.a.mark((function e(){return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!u.current){e.next=2;break}return e.abrupt("return");case 2:return u.current=!0,e.prev=3,e.next=6,a.current(...n);case 6:u.current=!1,e.next=13;break;case 9:throw e.prev=9,e.t0=e["catch"](3),u.current=!1,e.t0;case 13:case"end":return e.stop()}}),e,null,[[3,9]])})))()}),[a]):"debounce"===(null===n||void 0===n?void 0:n.action)?p(Object(E["debounce"])((function(){return a.current(...arguments)}),f,{leading:null!==(c=null===n||void 0===n?void 0:n.leading)&&void 0!==c&&c,trailing:null===(o=null===n||void 0===n?void 0:n.leading)||void 0===o||o}),[a]):"throttle"===(null===n||void 0===n?void 0:n.action)?p(Object(E["throttle"])((function(){return a.current(...arguments)}),f,{leading:null===(l=null===n||void 0===n?void 0:n.leading)||void 0===l||l,trailing:null===(d=null===n||void 0===n?void 0:n.trailing)||void 0===d||d}),[a]):p((function(){return a.current(...arguments)}),[a])}var b=h;function O(e,n){var t=Object(r["useRef"])(!1),a=Object(r["useRef"])(),u=Object(r["useRef"])(e);u.current=e;var c=b((()=>t.current)),o=b((()=>{t.current=!1,a.current&&clearTimeout(a.current),a.current=setTimeout((()=>{t.current=!0,u.current()}),n.delay)})),l=b((()=>{t.current=null,a.current&&clearTimeout(a.current),a.current=null}));return Object(r["useEffect"])((()=>{if(!n.manual)return o(),l}),[n.delay]),{isReady:c,cancel:l,run:o}}var g=O,j=t("ODXe");function w(){var e=Object(r["useState"])(0),n=Object(j["a"])(e,2),t=n[1];return b((()=>t((e=>(e+1)%1e6))))}var k=w},zfyl:function(e,n,t){"use strict";t.r(n);var r=t("wx14"),a=t("q1tI"),u=t.n(a),c=(t("B2uJ"),t("+su7"),t("qOys")),o=t.n(c),l=t("5Yjd"),i=t.n(l),s=u.a.memo((function(){var e=t("TqRt"),n=e(t("q1tI")),r=e(t("Sl5v")),a=function(){return n["default"].createElement(r["default"],null)};return n["default"].createElement(a)}));n["default"]=function(){return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"markdown"},u.a.createElement("h1",{id:"useeffectonce"},u.a.createElement("a",{"aria-hidden":"true",href:"#useeffectonce"},u.a.createElement("span",{className:"icon icon-link"})),"useEffectOnce"),u.a.createElement("p",null,"\u7ec4\u4ef6\u52a0\u8f7d\u65f6 \u4fdd\u8bc1\u53ea\u8fd0\u884c\u4e00\u6b21\u7684\u7684 ",u.a.createElement("code",null,"Effect")),u.a.createElement("h1",{id:"\u4ee3\u7801\u6f14\u793a"},u.a.createElement("a",{"aria-hidden":"true",href:"#\u4ee3\u7801\u6f14\u793a"},u.a.createElement("span",{className:"icon icon-link"})),"\u4ee3\u7801\u6f14\u793a"),u.a.createElement("h2",{id:"\u57fa\u7840\u7528\u6cd5"},u.a.createElement("a",{"aria-hidden":"true",href:"#\u57fa\u7840\u7528\u6cd5"},u.a.createElement("span",{className:"icon icon-link"})),"\u57fa\u7840\u7528\u6cd5")),u.a.createElement(i.a,Object(r["a"])({source:{tsx:"import React, { useState } from 'react';\nimport { Button, message } from 'antd';\nimport { useEffectOnce } from '@onecocjs/use';\n\nfunction Children() {\n  const [count, updateCount] = useState(0);\n\n  useEffectOnce(() => {\n    message.success('running effect once on mount');\n    return () => {\n      message.warn('running clean-up of effect on unmount');\n    };\n  });\n\n  return (\n    <>\n      <h1>hello world</h1>\n      <p>\u8ba1\u6570\uff1a{count}</p>\n      <Button onClick={() => updateCount(count + 1)}>\u9012\u589e</Button>\n    </>\n  );\n}\n\nexport default () => {\n  const [value, updateValue] = useState(true);\n\n  return (\n    <div>\n      <Button type=\"primary\" onClick={() => updateValue(!value)}>\n        {value ? '\u9690\u85cf\u5b50\u7ec4\u4ef6' : '\u663e\u793a\u5b50\u7ec4\u4ef6'}\n      </Button>\n      {value ? <Children /> : null}\n    </div>\n  );\n};\n",jsx:"import React, { useState } from 'react';\nimport { Button, message } from 'antd';\nimport { useEffectOnce } from '@onecocjs/use';\n\nfunction Children() {\n  const [count, updateCount] = useState(0);\n  useEffectOnce(() => {\n    message.success('running effect once on mount');\n    return () => {\n      message.warn('running clean-up of effect on unmount');\n    };\n  });\n  return (\n    <>\n      <h1>hello world</h1>\n      <p>\u8ba1\u6570\uff1a{count}</p>\n      <Button onClick={() => updateCount(count + 1)}>\u9012\u589e</Button>\n    </>\n  );\n}\n\nexport default () => {\n  const [value, updateValue] = useState(true);\n  return (\n    <div>\n      <Button type=\"primary\" onClick={() => updateValue(!value)}>\n        {value ? '\u9690\u85cf\u5b50\u7ec4\u4ef6' : '\u663e\u793a\u5b50\u7ec4\u4ef6'}\n      </Button>\n      {value ? <Children /> : null}\n    </div>\n  );\n};\n"}},{path:"/_demos/example01",title:"Default usage",desc:'<div class="markdown"><p>Default as a switch function, or accept a parameter to change state.</p></div>',"title.zh-CN":"\u57fa\u7840\u7528\u6cd5","desc.zh-CN":'<div class="markdown"><p>\u7ec4\u4ef6\u52a0\u8f7d\u65f6 \u4fdd\u8bc1\u53ea\u8fd0\u884c\u4e00\u6b21\u7684\u7684 <code>Effect</code></p></div>',CSSInDependencies:["antd/dist/antd.css"],dependencies:{react:">=16.9.0","react-dom":">=16.9.0",antd:"4.8.5","@onecocjs/use":"0.0.0"},files:{}}),u.a.createElement(s,null)),u.a.createElement("div",{className:"markdown"},u.a.createElement("h1",{id:"\u51fd\u6570\u7b7e\u540d"},u.a.createElement("a",{"aria-hidden":"true",href:"#\u51fd\u6570\u7b7e\u540d"},u.a.createElement("span",{className:"icon icon-link"})),"\u51fd\u6570\u7b7e\u540d"),u.a.createElement(o.a,{code:"useEffectOnce( fn: () => void | (() => void | undefined) )\n",lang:"ts"})))}}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[36,35],{GKQS:function(e,n,t){"use strict";t.r(n);t("+L6B");var a=t("2/Rp"),l=t("ODXe"),r=t("q1tI"),c=t.n(r),u=t("tXm+"),s=function(e){var n=Object(r["useState"])(null),t=Object(l["a"])(n,2),a=t[0],u=t[1];return Object(r["useEffect"])((()=>{u(Math.random())}),[e.fn]),c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,"i'm is children1, this is i random number ",a))};n["default"]=function(){var e=Object(r["useState"])(0),n=Object(l["a"])(e,2),t=n[0],i=n[1],o=Object(u["a"])((()=>{i(t+1)}));return c.a.createElement(c.a.Fragment,null,c.a.createElement("h1",null,t),c.a.createElement(s,{fn:o}),c.a.createElement("p",null,"\u8fde\u7eed\u70b9\u51fb\u4e4b\u540e\uff0c\u5b50\u7ec4\u4ef6\u5e76\u4e0d\u4f1a\u88ab\u6e32\u67d3"),c.a.createElement(a["a"],{type:"primary",onClick:o},"\u8fde\u7eed\u70b9\u51fb"))}},"tXm+":function(e,n,t){"use strict";var a=t("q1tI");function l(e){var n=Object(a["useRef"])(e);n.current=e;var t=Object(a["useRef"])(null);return t.current||(t.current=function(){for(var e,t=arguments.length,a=new Array(t),l=0;l<t;l++)a[l]=arguments[l];return null===(e=n.current)||void 0===e?void 0:e.call(n,...a)}),t.current}n["a"]=l},ult6:function(e,n,t){"use strict";t.r(n);var a=t("wx14"),l=t("q1tI"),r=t.n(l),c=(t("B2uJ"),t("+su7"),t("qOys")),u=t.n(c),s=t("5Yjd"),i=t.n(s),o=r.a.memo((function(){var e=t("TqRt"),n=e(t("q1tI")),a=e(t("GKQS")),l=function(){return n["default"].createElement(a["default"],null)};return n["default"].createElement(l)}));n["default"]=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"markdown"},r.a.createElement("h1",{id:"usepersistfn"},r.a.createElement("a",{"aria-hidden":"true",href:"#usepersistfn"},r.a.createElement("span",{className:"icon icon-link"})),"usePersistFn"),r.a.createElement("p",null,"\u4fdd\u8bc1\u51fd\u6570\u5bf9\u8c61\u6c38\u8fdc\u4e0d\u4f1a\u53d1\u751f\u53d8\u5316\u3002"),r.a.createElement("blockquote",null,r.a.createElement("p",null,"\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u5982\u679c\u8bd5\u56fe\u53bb\u7f13\u5b58\u4e00\u4e2a\u51fd\u6570\u901a\u5e38\u662f\u901a\u8fc7 ",r.a.createElement("code",null,"useCallback")," \u6765\u5b9e\u73b0 \uff0c \u800c\u5f53\u4f7f\u7528 ",r.a.createElement("code",null,"useCallback")," \u65f6\u5b58\u5728 ",r.a.createElement("code",null,"deps")," \u7684\u8bdd\uff0c\u90a3\u4e48\u7f13\u5b58\u7684\u6548\u679c\u5219\u5e76\u4e0d\u662f\u5f88\u7406\u60f3\u3002\u6bcf\u5f53 ",r.a.createElement("code",null,"deps")," \u53d1\u751f\u53d8\u5316\u65f6\uff0c",r.a.createElement("code",null,"useCallback")," \u521b\u5efa\u7684\u51fd\u6570\u603b\u662f\u4f1a\u91cd\u65b0\u521b\u5efa\u3002"),r.a.createElement("p",null,"\u5e76\u4e14\u7531\u4e8e ",r.a.createElement("code",null,"useCallback")," \u7684\u5e95\u5c42\u5b9e\u73b0\u662f\u57fa\u4e8e ",r.a.createElement("code",null,"useMemo")," \uff0c \u800c ",r.a.createElement("code",null,"useMemo")," \u5e76\u4e0d\u627f\u8bfa\u6c38\u4e45\u7f13\u5b58\uff0c\u5728\u672a\u6765 React \u53ef\u80fd\u4f1a\u9009\u62e9\u6027\u7684\u4e22\u5931\u4e00\u4e9b\u7f13\u5b58\u7684\u503c\uff0c\u8fdb\u884c\u91cd\u65b0\u8ba1\u7b97\u3002"),r.a.createElement("p",null,r.a.createElement("code",null,"usePersistFn")," \u53ef\u4ee5\u4fdd\u8bc1\u51fd\u6570\u5730\u5740\u6c38\u8fdc\u4e0d\u4f1a\u53d8\u5316")),r.a.createElement("h1",{id:"\u4ee3\u7801\u6f14\u793a"},r.a.createElement("a",{"aria-hidden":"true",href:"#\u4ee3\u7801\u6f14\u793a"},r.a.createElement("span",{className:"icon icon-link"})),"\u4ee3\u7801\u6f14\u793a"),r.a.createElement("h2",{id:"\u57fa\u7840\u7528\u6cd5"},r.a.createElement("a",{"aria-hidden":"true",href:"#\u57fa\u7840\u7528\u6cd5"},r.a.createElement("span",{className:"icon icon-link"})),"\u57fa\u7840\u7528\u6cd5")),r.a.createElement(i.a,Object(a["a"])({source:{tsx:"import React, { useState, useEffect } from 'react';\nimport { Button } from 'antd';\nimport usePersistFn from '@onecocjs/use.persistfn';\n\nconst Children1 = function(props: { fn: () => void }) {\n  const [state, updateState] = useState<null | number>(null);\n\n  useEffect(() => {\n    updateState(Math.random());\n  }, [props.fn]);\n\n  return (\n    <>\n      <p>i'm is children1, this is i random number {state}</p>\n    </>\n  );\n};\n\nexport default function() {\n  const [count, updateCount] = useState(0);\n  const fn = usePersistFn(() => {\n    updateCount(count + 1);\n  });\n\n  return (\n    <>\n      <h1>{count}</h1>\n      <Children1 fn={fn} />\n      <p>\u8fde\u7eed\u70b9\u51fb\u4e4b\u540e\uff0c\u5b50\u7ec4\u4ef6\u5e76\u4e0d\u4f1a\u88ab\u6e32\u67d3</p>\n      <Button type=\"primary\" onClick={fn}>\n        \u8fde\u7eed\u70b9\u51fb\n      </Button>\n    </>\n  );\n}\n",jsx:"import React, { useState, useEffect } from 'react';\nimport { Button } from 'antd';\nimport usePersistFn from '@onecocjs/use.persistfn';\n\nconst Children1 = function (props) {\n  const [state, updateState] = useState(null);\n  useEffect(() => {\n    updateState(Math.random());\n  }, [props.fn]);\n  return (\n    <>\n      <p>i'm is children1, this is i random number {state}</p>\n    </>\n  );\n};\n\nexport default function () {\n  const [count, updateCount] = useState(0);\n  const fn = usePersistFn(() => {\n    updateCount(count + 1);\n  });\n  return (\n    <>\n      <h1>{count}</h1>\n      <Children1 fn={fn} />\n      <p>\u8fde\u7eed\u70b9\u51fb\u4e4b\u540e\uff0c\u5b50\u7ec4\u4ef6\u5e76\u4e0d\u4f1a\u88ab\u6e32\u67d3</p>\n      <Button type=\"primary\" onClick={fn}>\n        \u8fde\u7eed\u70b9\u51fb\n      </Button>\n    </>\n  );\n}\n"}},{path:"/_demos/example-basic-6",title:"Default usage",desc:'<div class="markdown"><p>Default as a switch function, or accept a parameter to change state.</p></div>',"title.zh-CN":"\u57fa\u7840\u7528\u6cd5","desc.zh-CN":'<div class="markdown"><p>\u5305\u542b\u51fd\u6570\u7684\u5185\u5b58\u5730\u5740\u6c38\u8fdc\u4e0d\u4f1a\u53d8\u5316</p></div>',CSSInDependencies:["antd/dist/antd.css"],dependencies:{react:">=16.9.0","react-dom":">=16.9.0",antd:"4.8.5","@onecocjs/use.persistfn":"0.0.1-alpha.1"},files:{}}),r.a.createElement(o,null)),r.a.createElement("div",{className:"markdown"},r.a.createElement("h2",{id:"\u7b7e\u540d"},r.a.createElement("a",{"aria-hidden":"true",href:"#\u7b7e\u540d"},r.a.createElement("span",{className:"icon icon-link"})),"\u7b7e\u540d"),r.a.createElement(u.a,{code:"usePersistFn<T extends (...args: any[]) => any>( fn: T ):T\n",lang:"ts"}),r.a.createElement("h2",{id:"\u53c2\u6570"},r.a.createElement("a",{"aria-hidden":"true",href:"#\u53c2\u6570"},r.a.createElement("span",{className:"icon icon-link"})),"\u53c2\u6570"),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"\u53c2\u6570"),r.a.createElement("th",null,"\u8bf4\u660e"),r.a.createElement("th",null,"\u7c7b\u578b"),r.a.createElement("th",null,"\u5fc5\u8981"),r.a.createElement("th",null,"\u9ed8\u8ba4\u503c"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"fn"),r.a.createElement("td",null,"\u9700\u8981\u7f13\u5b58\u7684\u51fd\u6570"),r.a.createElement("td",null,"() => any"),r.a.createElement("td",null,"true"),r.a.createElement("td",null,"-")))),r.a.createElement("h2",{id:"\u7ed3\u679c"},r.a.createElement("a",{"aria-hidden":"true",href:"#\u7ed3\u679c"},r.a.createElement("span",{className:"icon icon-link"})),"\u7ed3\u679c"),r.a.createElement("p",null,"\u4e00\u4e2a\u5168\u65b0\u7684\u88ab",r.a.createElement("code",null,"\u6c38\u4e45\u7f13\u5b58"),"\u7684\u51fd\u6570\u5bf9\u8c61")))}}}]);